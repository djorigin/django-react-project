{% extends 'base.html' %}
{% load static %}

{% block title %}{{ page_title }}{% endblock %}

{% block content %}
<div class="min-h-screen bg-gradient-to-br from-gray-900 via-purple-900 to-gray-900 py-12 px-4 sm:px-6 lg:px-8">
    <div class="max-w-4xl mx-auto">
        
        <!-- Header -->
        <div class="text-center mb-8">
            <h1 class="text-3xl font-bold text-transparent bg-clip-text bg-gradient-to-r from-brand-gold to-brand-purple">
                Your Profile
            </h1>
            <p class="mt-2 text-gray-300">
                Your complete profile information
            </p>
        </div>

        <!-- Profile Information Cards -->
        <div class="space-y-6">
            
            <!-- Basic Information -->
            <div class="bg-white/5 backdrop-blur-sm rounded-lg p-6 border border-brand-purple/20 shadow-lg hover:shadow-xl transition duration-300 transform hover:-translate-y-0.5">
                <div class="flex items-center justify-between mb-4">
                    <h3 class="text-xl font-semibold text-gray-100">Basic Information</h3>
                    <div class="flex items-center space-x-2">
                        <span class="inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-brand-gold/20 text-brand-gold">
                            {{ profile.profile_type.name }}
                        </span>
                        {% if profile.is_verified %}
                            <span class="inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-green-100 text-green-800">
                                ‚úì Verified
                            </span>
                        {% endif %}
                    </div>
                </div>
                
                <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                    <div>
                        <div class="space-y-4">
                            <div>
                                <label class="block text-sm font-medium text-gray-400">Full Name</label>
                                <p class="mt-1 text-gray-100">{{ profile.user.get_full_name|default:"Not provided" }}</p>
                            </div>
                            <div>
                                <label class="block text-sm font-medium text-gray-400">Email</label>
                                <p class="mt-1 text-gray-100">{{ profile.user.email }}</p>
                            </div>
                            <div>
                                <label class="block text-sm font-medium text-gray-400">Phone</label>
                                <p class="mt-1 text-gray-100">{{ profile.phone|default:"Not provided" }}</p>
                            </div>
                        </div>
                    </div>
                    
                    <div>
                        {% if profile.image %}
                            <div class="text-center">
                                <img class="mx-auto h-32 w-32 rounded-full object-cover border-4 border-brand-gold/30" 
                                     src="{{ profile.image.url }}" alt="Profile image">
                                <p class="mt-2 text-sm text-gray-400">Profile Image</p>
                            </div>
                        {% else %}
                            <div class="text-center">
                                <div class="mx-auto h-32 w-32 rounded-full bg-gradient-to-r from-brand-purple to-brand-magenta flex items-center justify-center">
                                    <span class="text-4xl text-white">{{ profile.user.first_name.0|default:"?" }}{{ profile.user.last_name.0|default:"" }}</span>
                                </div>
                                <p class="mt-2 text-sm text-gray-400">No profile image</p>
                            </div>
                        {% endif %}
                    </div>
                </div>
            </div>

            <!-- Compliance Information (for Staff/Pilot) -->
            {% if profile.profile_type.code in 'staff,pilot' %}
                <div class="bg-white/5 backdrop-blur-sm rounded-lg p-6 border border-brand-purple/20 shadow-lg hover:shadow-xl transition duration-300 transform hover:-translate-y-0.5">
                    <h3 class="text-xl font-semibold text-gray-100 mb-4">Compliance Information</h3>
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                        <div>
                            <label class="block text-sm font-medium text-gray-400">Date of Birth</label>
                            <p class="mt-1 text-gray-100">{{ profile.date_of_birth|date:"F j, Y"|default:"Not provided" }}</p>
                        </div>
                        <div>
                            <label class="block text-sm font-medium text-gray-400">Tax File Number</label>
                            <p class="mt-1 text-gray-100">
                                {% if profile.tax_file_number %}
                                    ***-***-{{ profile.tax_file_number|slice:"-3:" }}
                                {% else %}
                                    Not provided
                                {% endif %}
                            </p>
                        </div>
                        {% if profile.profile_type.code == 'pilot' %}
                            <div>
                                <label class="block text-sm font-medium text-gray-400">Aviation Reference Number (ARN)</label>
                                <p class="mt-1 text-gray-100">{{ profile.arn_number|default:"Not provided" }}</p>
                            </div>
                        {% endif %}
                    </div>
                </div>
            {% endif %}

            <!-- Address Information -->
            <div class="bg-white/5 backdrop-blur-sm rounded-lg p-6 border border-brand-purple/20 shadow-lg hover:shadow-xl transition duration-300 transform hover:-translate-y-0.5">
                <h3 class="text-xl font-semibold text-gray-100 mb-4">Address Information</h3>
                <div class="space-y-4">
                    {% if profile.full_address %}
                        <div>
                            <label class="block text-sm font-medium text-gray-400">Address</label>
                            <p class="mt-1 text-gray-100">{{ profile.full_address }}</p>
                        </div>
                    {% else %}
                        <p class="text-gray-400">No address information provided</p>
                    {% endif %}
                    
                    {% if profile.coordinates %}
                        <div>
                            <label class="block text-sm font-medium text-gray-400">Coordinates</label>
                            <p class="mt-1 text-gray-100 font-mono text-sm">
                                {{ profile.coordinates.0|floatformat:6 }}, {{ profile.coordinates.1|floatformat:6 }}
                            </p>
                        </div>
                    {% endif %}
                </div>
            </div>

            <!-- Additional Information -->
            {% if profile.bio or profile.website %}
                <div class="bg-white/5 backdrop-blur-sm rounded-lg p-6 border border-brand-purple/20 shadow-lg hover:shadow-xl transition duration-300 transform hover:-translate-y-0.5">
                    <h3 class="text-xl font-semibold text-gray-100 mb-4">Additional Information</h3>
                    <div class="space-y-4">
                        {% if profile.bio %}
                            <div>
                                <label class="block text-sm font-medium text-gray-400">Bio</label>
                                <p class="mt-1 text-gray-100">{{ profile.bio }}</p>
                            </div>
                        {% endif %}
                        {% if profile.website %}
                            <div>
                                <label class="block text-sm font-medium text-gray-400">Website</label>
                                <a href="{{ profile.website }}" target="_blank" 
                                   class="mt-1 text-brand-gold hover:text-brand-gold-light transition duration-200">
                                    {{ profile.website }}
                                </a>
                            </div>
                        {% endif %}
                    </div>
                </div>
            {% endif %}

            <!-- Profile Status -->
            <div class="bg-white/5 backdrop-blur-sm rounded-lg p-6 border border-brand-purple/20 shadow-lg hover:shadow-xl transition duration-300 transform hover:-translate-y-0.5">
                <h3 class="text-xl font-semibold text-gray-100 mb-4">Profile Status</h3>
                <div class="grid grid-cols-1 md:grid-cols-3 gap-4">
                    <div class="text-center">
                        <div class="text-2xl mb-2">
                            {% if profile.is_verified %}‚úÖ{% else %}‚è≥{% endif %}
                        </div>
                        <p class="text-sm text-gray-400">Verification Status</p>
                        <p class="font-medium text-gray-100">
                            {% if profile.is_verified %}Verified{% else %}Pending{% endif %}
                        </p>
                    </div>
                    <div class="text-center">
                        <div class="text-2xl mb-2">
                            {% if profile.is_public %}üåê{% else %}üîí{% endif %}
                        </div>
                        <p class="text-sm text-gray-400">Profile Visibility</p>
                        <p class="font-medium text-gray-100">
                            {% if profile.is_public %}Public{% else %}Private{% endif %}
                        </p>
                    </div>
                    <div class="text-center">
                        <div class="text-2xl mb-2">üìÖ</div>
                        <p class="text-sm text-gray-400">Member Since</p>
                        <p class="font-medium text-gray-100">{{ profile.created_at|date:"M Y" }}</p>
                    </div>
                </div>
            </div>

        </div>

        <!-- Action Buttons -->
        <div class="mt-8 flex flex-col sm:flex-row gap-4 justify-center">
            <a href="{% url 'accounts:profile_edit' %}" class="bg-gradient-to-r from-brand-gold to-brand-bronze hover:from-brand-gold-dark hover:to-brand-bronze-dark text-white font-bold py-3 px-6 rounded-lg transition duration-300 shadow-lg hover:shadow-xl transform hover:-translate-y-1">
                Edit Profile
            </a>
            
            <a href="{% url 'accounts:dashboard' %}" class="border-2 border-brand-purple text-brand-purple hover:bg-brand-purple hover:text-white font-bold py-3 px-6 rounded-lg transition duration-300">
                ‚Üê Back to Dashboard
            </a>
        </div>

    </div>
</div>
{% endblock %}