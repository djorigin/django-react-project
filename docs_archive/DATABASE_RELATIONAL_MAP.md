# COMPREHENSIVE RELATIONAL DATABASE MAP
## Django RPAS (Aviation) Management System

**Generated by GitHub Copilot** | **Date**: November 23, 2025  
**Purpose**: Complete database architecture reference for debugging and development  
**As recommended by**: HSBC Senior Software Engineer - "Life saver for debugging and future development"

---

## ğŸ¯ EXECUTIVE SUMMARY

This Django RPAS management system implements a **sophisticated three-tier distributed architecture** with **21 models** across **5 Django apps**, centered around a **revolutionary three-color CASA compliance system** (GREEN/YELLOW/RED).

### **System Architecture Overview**
- **Foundation Layer**: `core/` app with authentication, profiles, geography, and compliance engine
- **Operations Layer**: `rpas/` app with F2 Technical Log automation and aircraft management  
- **Safety Layer**: `sms/` app with intelligent risk management
- **Regulatory Layer**: `aviation/` app with GeoDjango airspace management
- **Interface Layer**: `accounts/` app with authentication views (no models)

### **Compliance Integration Status**
- **âœ… Universal ComplianceMixin**: 12+ models integrate the three-color compliance system
- **âœ… Rule-Driven Engine**: Dynamic compliance evaluation via `ComplianceRule` model
- **âœ… Real-Time Status**: GREEN/YELLOW/RED indicators across all operations
- **âœ… CASA Automation**: Intelligent compliance checking for Australian aviation law

---

## ğŸ“Š MODEL INVENTORY BY APP

### **Core App (6 models) - Foundation Hub**
| Model | Purpose | Primary Key | Compliance |
|-------|---------|-------------|------------|
| `CustomUser` | Email-based authentication | UUID | âŒ Built-in |
| `ProfileType` | Profile classification | Auto-increment | âŒ Lookup table |
| `BaseProfile` | User profiles with CASA fields | Auto-increment | âœ… ComplianceMixin |
| `Country` â†’ `State` â†’ `City` â†’ `PostalCode` | Geographical hierarchy | Auto-increment | âŒ Reference data |
| `ComplianceStatus` | Three-color status enum | N/A | N/A Core enum |
| `ComplianceRule` | Dynamic rule engine | Auto-increment | âŒ Engine core |
| `ComplianceCheck` | Rule evaluation results | Auto-increment | âŒ Engine core |
| `ComplianceMixin` | Abstract compliance base | N/A | N/A Abstract |

### **RPAS App (10 models) - Operations Core**
| Model | Purpose | Primary Key | Compliance |
|-------|---------|-------------|------------|
| `RPASOperator` | ReOC holder company | UUID | âŒ Foundation |
| `KeyPersonnel` | CASA personnel assignments | UUID | âŒ Personnel |
| `AircraftRegistration` | Registration management | UUID | âŒ Administrative |
| `RPASAircraft` | Aircraft master data | UUID | âŒ Foundation |
| `RPASTechnicalLogPartA` | F2 log headers | UUID | âœ… ComplianceMixin |
| `F2Part101MOSCertification` | MOS certifications | UUID | âŒ Certification |
| `F2MaintenanceRequired` | AI-generated maintenance | UUID | âœ… ComplianceMixin |
| `F2MajorDefects` | Major defect tracking | UUID | âœ… ComplianceMixin |
| `F2MinorDefects` | Minor defect tracking | UUID | âœ… ComplianceMixin |
| `F2MaintenanceSchedule` | AI automation engine | UUID | âœ… ComplianceMixin |

### **SMS App (11 models) - Safety Intelligence**
| Model | Purpose | Primary Key | Compliance |
|-------|---------|-------------|------------|
| `RiskCategory` | Risk classification | UUID | âŒ Lookup table |
| `RiskRegister` | AI-powered risk management | UUID | âœ… ComplianceMixin |
| `RiskControl` | Risk mitigation measures | UUID | âŒ Related data |
| `StandardOperatingProcedure` | SOP management | UUID | âœ… ComplianceMixin |
| `SOPAcknowledgment` | Training tracking | UUID | âŒ Related data |
| `JobSafetyAnalysis` | JSA workflows | UUID | âœ… ComplianceMixin |
| `JSAJobStep` | JSA step details | UUID | âŒ Related data |
| `JSAHazard` | Hazard identification | UUID | âŒ Related data |
| `IncidentCategory` | Incident classification | UUID | âŒ Lookup table |
| `Incident` | Incident management | UUID | âœ… ComplianceMixin |
| `CorrectiveAction` | Action tracking | UUID | âŒ Related data |

### **Aviation App (3 models) - Spatial Intelligence**
| Model | Purpose | Primary Key | Compliance |
|-------|---------|-------------|------------|
| `AirspaceClass` | CASA airspace boundaries | UUID | âœ… ComplianceMixin |
| `Aerodrome` | Airport/landing site data | UUID | âœ… ComplianceMixin |
| `RPASOperationalZone` | Operational area definition | UUID | âœ… ComplianceMixin |

### **Accounts App (0 models) - Interface Only**
- No models - contains forms, views, and templates for authentication interface

---

## ğŸ”— CRITICAL RELATIONSHIP PATTERNS

### **1. Core Hub Pattern - Central Dependencies**
```
All Apps â†’ core/CustomUser (Authentication)
All Apps â†’ core/Countryâ†’Stateâ†’Cityâ†’PostalCode (Geography)
All Models â†’ core/ComplianceMixin (Compliance)
```

### **2. CASA Operations Chain - Aviation Hierarchy**
```
RPASOperator (ReOC Holder)
    â†“ (one-to-many)
KeyPersonnel (CASA Appointments)
    â†“ (one-to-many)  
RPASAircraft (Fleet)
    â†“ (one-to-many)
RPASTechnicalLogPartA (F2 Headers)
    â†“ (one-to-many)
F2MaintenanceRequired (AI Generated)
```

### **3. Three-Color Compliance Web - Universal Integration**
```
ComplianceRule (Engine)
    â†“ evaluates
Any Model with ComplianceMixin
    â†“ generates
ComplianceCheck (Results)
    â†“ provides
GREEN/YELLOW/RED Status
```

### **4. Geographical Chained Selection - Normalized Hierarchy**
```
Country (250 records)
    â†“ (one-to-many)
State (76 Australian states/territories)
    â†“ (one-to-many)  
City (155 Australian cities)
    â†“ (one-to-many)
PostalCode (Future expansion)
```

---

## ğŸ¨ VISUAL ASCII RELATIONSHIP DIAGRAM

```
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚                    CORE APP (HUB)                      â”‚
                    â”‚                                                         â”‚
                    â”‚  CustomUser (UUID) â†â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                       â”‚
                    â”‚      â”‚                        â”‚                       â”‚
                    â”‚      â”œâ”€â†’ BaseProfile          â”‚                       â”‚
                    â”‚      â”‚      â”‚                 â”‚                       â”‚
                    â”‚  ProfileType â”‚                â”‚                       â”‚
                    â”‚      â”‚       â”‚                â”‚                       â”‚
                    â”‚  â”Œâ”€â”€â”€â–¼â”€â”€â”€â”   â”‚                â”‚                       â”‚
                    â”‚  â”‚Countryâ”‚   â”‚                â”‚                       â”‚
                    â”‚  â”‚   â”‚   â”‚   â”‚                â”‚                       â”‚
                    â”‚  â”‚ State â”‚   â”‚                â”‚                       â”‚
                    â”‚  â”‚   â”‚   â”‚   â”‚                â”‚                       â”‚
                    â”‚  â”‚ City  â”‚   â”‚                â”‚                       â”‚
                    â”‚  â”‚   â”‚   â”‚   â”‚                â”‚                       â”‚
                    â”‚  â”‚Postal â”‚   â”‚                â”‚                       â”‚
                    â”‚  â”‚ Code  â”‚   â”‚                â”‚                       â”‚
                    â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚                â”‚                       â”‚
                    â”‚              â”‚                â”‚                       â”‚
                    â”‚  ComplianceRule â†â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
                    â”‚      â”‚                        â”‚                     â”‚ â”‚
                    â”‚  ComplianceCheck               â”‚                     â”‚ â”‚
                    â”‚      â”‚                        â”‚                     â”‚ â”‚
                    â”‚  ComplianceMixin (Abstract)    â”‚                     â”‚ â”‚
                    â””â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”˜
                           â”‚                        â”‚                     â”‚
               â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”          â”‚                     â”‚
               â”‚      RPAS APP          â”‚          â”‚                     â”‚
               â”‚                        â”‚          â”‚                     â”‚
               â”‚  RPASOperator (UUID)   â”‚          â”‚                     â”‚
               â”‚      â”‚                 â”‚          â”‚                     â”‚
               â”‚      â”œâ”€â†’ KeyPersonnel â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                     â”‚
               â”‚      â”‚      â”‚          â”‚                                â”‚
               â”‚      â”œâ”€â†’ RPASAircraft â”€â”¼â”€â†’ AircraftRegistration        â”‚
               â”‚      â”‚      â”‚          â”‚                                â”‚
               â”‚      â”‚      â”œâ”€â†’ F2TechnicalLogPartA (ComplianceMixin)  â”‚
               â”‚      â”‚      â”‚      â”‚   â”‚                                â”‚
               â”‚      â”‚      â”‚      â”œâ”€â†’ F2MaintenanceRequired (AI)      â”‚
               â”‚      â”‚      â”‚      â”‚   â”‚                                â”‚
               â”‚      â”‚      â”‚      â”œâ”€â†’ F2MajorDefects (ComplianceMixin) â”‚
               â”‚      â”‚      â”‚      â”‚   â”‚                                â”‚
               â”‚      â”‚      â”‚      â”œâ”€â†’ F2MinorDefects (ComplianceMixin) â”‚
               â”‚      â”‚      â”‚      â”‚   â”‚                                â”‚
               â”‚      â”‚      â”‚      â””â”€â†’ F2MaintenanceSchedule (AI Engine)â”‚
               â”‚      â”‚      â”‚          â”‚                                â”‚
               â”‚      â”‚      â””â”€â†’ F2Part101MOSCertification              â”‚
               â”‚      â”‚                 â”‚                                â”‚
               â”‚      â””â”€â†’ RiskRegister â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                   â”‚
               â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜            â”‚                   â”‚
                                                     â”‚                   â”‚
               â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”               â”‚
               â”‚              SMS APP                    â”‚               â”‚
               â”‚                                         â”‚               â”‚
               â”‚  RiskCategory â†â”€â”                       â”‚               â”‚
               â”‚      â”‚          â”‚                       â”‚               â”‚
               â”‚  RiskRegister (ComplianceMixin)         â”‚               â”‚
               â”‚      â”‚                                  â”‚               â”‚
               â”‚      â”œâ”€â†’ RiskControl                    â”‚               â”‚
               â”‚      â”‚                                  â”‚               â”‚
               â”‚  StandardOperatingProcedure (Compliance)â”‚               â”‚
               â”‚      â”‚                                  â”‚               â”‚
               â”‚      â””â”€â†’ SOPAcknowledgment              â”‚               â”‚
               â”‚                                         â”‚               â”‚
               â”‚  JobSafetyAnalysis (ComplianceMixin)    â”‚               â”‚
               â”‚      â”‚                                  â”‚               â”‚
               â”‚      â”œâ”€â†’ JSAJobStep                     â”‚               â”‚
               â”‚      â”‚                                  â”‚               â”‚
               â”‚      â””â”€â†’ JSAHazard                      â”‚               â”‚
               â”‚                                         â”‚               â”‚
               â”‚  IncidentCategory â†â”€â”                   â”‚               â”‚
               â”‚      â”‚              â”‚                   â”‚               â”‚
               â”‚  Incident (ComplianceMixin)             â”‚               â”‚
               â”‚      â”‚                                  â”‚               â”‚
               â”‚      â””â”€â†’ CorrectiveAction               â”‚               â”‚
               â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜               â”‚
                                                                         â”‚
               â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”
               â”‚                 AVIATION APP (GeoDjango)                  â”‚
               â”‚                                                           â”‚
               â”‚  AirspaceClass (ComplianceMixin)                          â”‚
               â”‚      â”‚ - PostGIS Polygon Boundaries                       â”‚
               â”‚      â”‚ - CASA Airspace Classifications                    â”‚
               â”‚                                                           â”‚
               â”‚  Aerodrome (ComplianceMixin)                              â”‚
               â”‚      â”‚ - Airport/Landing Site Data                        â”‚
               â”‚      â”‚ - GeoDjango Point Locations                        â”‚
               â”‚                                                           â”‚
               â”‚  RPASOperationalZone (ComplianceMixin)                    â”‚
               â”‚      â”” - Operational Area Boundaries                      â”‚
               â”‚        - Mission Planning Integration                     â”‚
               â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ“‹ COMPREHENSIVE RELATIONSHIP REFERENCE TABLE

### **Primary Foreign Key Relationships**

| Source Model | Field Name | Target Model | Relationship Type | Related Name | Business Purpose |
|--------------|------------|--------------|-------------------|--------------|------------------|
| **BaseProfile** | user | CustomUser | OneToOne | profile | User account linkage |
| **BaseProfile** | profile_type | ProfileType | ForeignKey | profiles | Profile classification |
| **BaseProfile** | postal_code | PostalCode | ForeignKey | profiles | Address normalization |
| **BaseProfile** | city | City | ForeignKey | profiles_direct | Address fallback |
| **State** | country | Country | ForeignKey | states | Geographical hierarchy |
| **City** | state | State | ForeignKey | cities | Geographical hierarchy |
| **PostalCode** | city | City | ForeignKey | postal_codes | Geographical hierarchy |
| **KeyPersonnel** | operator | RPASOperator | ForeignKey | key_personnel | CASA personnel assignment |
| **KeyPersonnel** | user | CustomUser | ForeignKey | key_personnel_roles | User account linkage |
| **AircraftRegistration** | aircraft | RPASAircraft | ForeignKey | registrations | Aircraft registration history |
| **RPASAircraft** | operator | RPASOperator | ForeignKey | aircraft | Fleet ownership |
| **RPASTechnicalLogPartA** | aircraft | RPASAircraft | ForeignKey | technical_logs | F2 log ownership |
| **RPASTechnicalLogPartA** | pilot | CustomUser | ForeignKey | piloted_flights | Pilot assignment |
| **F2MaintenanceRequired** | aircraft | RPASAircraft | ForeignKey | maintenance_required | Maintenance assignment |
| **F2MaintenanceRequired** | technical_log | RPASTechnicalLogPartA | ForeignKey | maintenance_entries | Log entry linkage |
| **F2MajorDefects** | aircraft | RPASAircraft | ForeignKey | major_defects | Defect assignment |
| **F2MinorDefects** | aircraft | RPASAircraft | ForeignKey | minor_defects | Defect assignment |
| **F2MaintenanceSchedule** | aircraft | RPASAircraft | ForeignKey | maintenance_schedules | AI automation assignment |
| **RiskRegister** | category | RiskCategory | ForeignKey | risks | Risk classification |
| **RiskRegister** | operator | RPASOperator | ForeignKey | risks | Operator assignment |
| **RiskRegister** | identified_by | CustomUser | ForeignKey | identified_risks | Risk identification |
| **StandardOperatingProcedure** | operator | RPASOperator | ForeignKey | sops | SOP ownership |
| **JobSafetyAnalysis** | operator | RPASOperator | ForeignKey | job_safety_analyses | JSA ownership |
| **Incident** | category | IncidentCategory | ForeignKey | incidents | Incident classification |
| **Incident** | operator | RPASOperator | ForeignKey | incidents | Incident ownership |
| **Incident** | reported_by | CustomUser | ForeignKey | reported_incidents | Reporter assignment |

### **Generic Foreign Key Relationships (ComplianceCheck)**

| Field Name | Purpose | Target Models | Business Purpose |
|------------|---------|---------------|------------------|
| content_type | Model identification | ContentType | Universal compliance linking |
| object_id | Record identification | Any model ID | Universal compliance linking |
| content_object | Generic linkage | Any ComplianceMixin model | Three-color status assignment |

### **Many-to-Many Relationships**

| Source Model | Field Name | Target Model | Through Model | Business Purpose |
|--------------|------------|--------------|---------------|------------------|
| **RiskRegister** | controls | RiskControl | None | Risk mitigation assignment |
| **StandardOperatingProcedure** | acknowledged_by | CustomUser | SOPAcknowledgment | Training tracking |
| **JSAJobStep** | hazards | JSAHazard | None | Hazard association |
| **Incident** | corrective_actions | CorrectiveAction | None | Action assignment |

---

## ğŸ”§ DEBUGGING QUICK REFERENCE

### **Common Relationship Queries**

#### **User and Profile Debugging**
```python
# Get user's profile
user = CustomUser.objects.get(email="pilot@example.com")
profile = user.profile  # OneToOne relationship

# Get all users of specific profile type
pilots = CustomUser.objects.filter(profile__profile_type__code="pilot")

# Get user's geographical location
user_city = profile.get_city  # Property method
user_country = profile.get_country  # Property method
```

#### **RPAS Operations Debugging**
```python
# Get all aircraft for an operator
operator = RPASOperator.objects.get(reoc_number="REO-123")
aircraft_fleet = operator.aircraft.all()  # related_name='aircraft'

# Get F2 maintenance for specific aircraft
aircraft = RPASAircraft.objects.get(registration="VH-ABC")
maintenance_required = aircraft.maintenance_required.all()
major_defects = aircraft.major_defects.all()
maintenance_schedules = aircraft.maintenance_schedules.all()

# Get pilot's flight history
pilot = CustomUser.objects.get(profile__arn_number="ARN123456")
flights = pilot.piloted_flights.all()  # related_name='piloted_flights'
```

#### **Compliance Status Debugging**
```python
# Check any model's compliance status
model_instance = RPASAircraft.objects.get(id=uuid)
status = model_instance.compliance_status  # GREEN/YELLOW/RED
summary = model_instance.get_compliance_summary()  # Detailed compliance data

# Get all failed compliance checks
failed_checks = ComplianceCheck.objects.filter(
    status__in=['yellow', 'red'],
    content_type=ContentType.objects.get_for_model(RPASAircraft)
)
```

#### **Risk Management Debugging**
```python
# Get risks for operator
operator_risks = RiskRegister.objects.filter(operator=operator)
high_risks = operator_risks.filter(residual_risk_rating='high')

# Get risk controls
risk = RiskRegister.objects.get(risk_number="R-001")
controls = risk.controls.all()  # Many-to-many relationship
```

#### **Geographic Debugging**
```python
# Geographic hierarchy traversal
postal_code = PostalCode.objects.get(code="2000")
city = postal_code.city
state = city.state  
country = state.country

# Reverse relationships
sydney_postcodes = City.objects.get(name="Sydney").postal_codes.all()
nsw_cities = State.objects.get(code="NSW").cities.all()
aus_states = Country.objects.get(iso_code_2="AU").states.all()
```

---

## ğŸš¨ CRITICAL DEBUGGING PATTERNS

### **ComplianceMixin Models - Universal Pattern**
Every model inheriting `ComplianceMixin` has these methods:
- `.compliance_status` â†’ Returns 'green'/'yellow'/'red'
- `.get_compliance_summary()` â†’ Returns detailed compliance data
- `.get_compliance_color_class()` â†’ Returns Tailwind CSS classes
- `.get_compliance_checks()` â†’ Returns ComplianceCheck queryset

### **UUID Primary Keys - All Major Models**
Most models use UUID primary keys instead of auto-increment integers:
- Better for distributed systems
- API-friendly
- No sequential ID leakage
- Use `.get(id=uuid.UUID('...'))` for lookups

### **Geographical Foreign Key Chains**
Models with geographical fields use cascading foreign keys:
1. First try `postal_code` (if available in database)
2. Fall back to `city` (direct reference)
3. Use `*_manual` fields for manual postal code entry
4. Property methods like `.get_city`, `.get_state`, `.get_country` provide unified access

### **CASA Compliance Pattern**
Models follow strict CASA regulatory patterns:
- **RPASOperator**: ReOC holder (company level)
- **KeyPersonnel**: CASA-approved positions 
- **RPASAircraft**: Individual aircraft with F2 technical logs
- **F2*** Models**: Detailed CASA F2 compliance tracking

### **AI Automation Pattern**
F2 maintenance models implement "Set Once, Automate Forever":
- `F2MaintenanceSchedule`: Configuration (set once)
- `F2MaintenanceRequired`: AI-generated entries (automatic)
- Threshold monitoring triggers autonomous maintenance generation

---

## ğŸ“ˆ PERFORMANCE CONSIDERATIONS

### **Database Indexes**
Key indexes for performance:
- **Geographic models**: Country, State, City names and codes
- **Aviation models**: PostGIS spatial indexes on polygon/point fields
- **Compliance models**: content_type + object_id for generic foreign keys
- **UUID fields**: All UUID primary keys automatically indexed

### **Query Optimization Patterns**
```python
# Use select_related for foreign keys
aircraft = RPASAircraft.objects.select_related(
    'operator', 
    'operator__registered_office_country'
).get(id=uuid)

# Use prefetch_related for reverse foreign keys  
operator = RPASOperator.objects.prefetch_related(
    'aircraft', 
    'key_personnel', 
    'risks'
).get(reoc_number="REO-123")

# Use filters instead of iteration
compliant_aircraft = RPASAircraft.objects.filter(
    compliance_status='green'
)
```

---

## ğŸ¯ MODEL DEPENDENCY HIERARCHY

### **Dependency Levels** (from foundation to application)

**Level 0 - Core Foundation**
- `CustomUser`, `ProfileType`, Geographic models (`Country`, `State`, `City`, `PostalCode`)

**Level 1 - Compliance Engine**
- `ComplianceRule`, `ComplianceCheck`, `ComplianceMixin` (abstract)

**Level 2 - Profile Layer**
- `BaseProfile` (depends on CustomUser, ProfileType, Geographic models)

**Level 3 - Operations Foundation**
- `RPASOperator`, `RiskCategory`, `IncidentCategory`, `AirspaceClass`

**Level 4 - Personnel and Aircraft**
- `KeyPersonnel`, `RPASAircraft`, `AircraftRegistration`

**Level 5 - Operations and Safety**
- `RPASTechnicalLogPartA`, `RiskRegister`, `StandardOperatingProcedure`, `Aerodrome`

**Level 6 - Detailed Operations**
- `F2MaintenanceRequired`, `F2MajorDefects`, `F2MinorDefects`, `JobSafetyAnalysis`, `Incident`

**Level 7 - Advanced Features**
- `F2MaintenanceSchedule` (AI engine), `RPASOperationalZone`

**Level 8 - Supporting Data**
- `RiskControl`, `SOPAcknowledgment`, `JSAJobStep`, `JSAHazard`, `CorrectiveAction`

---

## ğŸ“š CONCLUSION

This comprehensive relational database map provides complete visibility into the Django RPAS management system's data architecture. The system implements sophisticated relationships centered around the three-color CASA compliance system, with intelligent automation features and proper normalized data structures.

**Key Architectural Strengths:**
- âœ… **Normalized Geography**: Single source of truth for all location data
- âœ… **Universal Compliance**: Every operational model integrates three-color status
- âœ… **CASA Regulatory**: Full Australian aviation law compliance
- âœ… **AI Automation**: F2 maintenance schedules with autonomous generation
- âœ… **Spatial Intelligence**: GeoDjango integration for airspace management
- âœ… **Performance Ready**: Proper indexing and query optimization support

Use this document as your primary reference for understanding model relationships, debugging complex queries, and planning feature development that respects the established data architecture.

---

**Document Version**: 1.0  
**Last Updated**: November 23, 2025  
**Models Analyzed**: 21 models across 5 Django apps  
**Relationships Documented**: 50+ foreign key relationships, generic relationships, and many-to-many associations